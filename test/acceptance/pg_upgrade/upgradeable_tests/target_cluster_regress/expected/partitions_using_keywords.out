-- Copyright (c) 2017-2022 VMware, Inc. or its affiliates
-- SPDX-License-Identifier: Apache-2.0

--------------------------------------------------------------------------------
-- Validate that the upgradeable objects are functional post-upgrade
--------------------------------------------------------------------------------

SELECT pg_get_partition_def('t_quote_test'::regclass);
 pg_get_partition_def                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 PARTITION BY RANGE(b)SUBPARTITION BY RANGE(c)SUBPARTITION BY LIST(e) (START (2002) END (2003) EVERY (1) WITH (appendonly='false') (START (1) END (2) EVERY (1) WITH (appendonly='false') (SUBPARTITION allocate VALUES('val1') WITH (appendonly='false'), SUBPARTITION "window" VALUES('val2') WITH (appendonly='false'), DEFAULT SUBPARTITION dsp  WITH (appendonly='false')), DEFAULT SUBPARTITION current  WITH (appendonly='false') (SUBPARTITION allocate VALUES('val1') WITH (appendonly='false'), SUBPARTITION "window" VALUES('val2') WITH (appendonly='false'), DEFAULT SUBPARTITION dsp  WITH (appendonly='false'))), DEFAULT PARTITION dp  WITH (appendonly='false') (START (1) END (2) EVERY (1) WITH (appendonly='false') (SUBPARTITION allocate VALUES('val1') WITH (appendonly='false'), SUBPARTITION "window" VALUES('val2') WITH (appendonly='false'), DEFAULT SUBPARTITION dsp  WITH (appendonly='false')), DEFAULT SUBPARTITION current  WITH (appendonly='false') (SUBPARTITION allocate VALUES('val1') WITH (appendonly='false'), SUBPARTITION "window" VALUES('val2') WITH (appendonly='false'), DEFAULT SUBPARTITION dsp  WITH (appendonly='false')))) 
(1 row)
